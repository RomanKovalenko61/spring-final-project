# Spring Final Project - Hotel Booking System

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–µ–ª—è–º–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Boot 3.5.x –∏ Spring Cloud.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **[QUICK_START.md](QUICK_START.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç
- **[MAKEFILE_USAGE.md](MAKEFILE_USAGE.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Makefile
- **[API_EXAMPLES.md](API_EXAMPLES.md)** - –ü—Ä–∏–º–µ—Ä—ã API –∑–∞–ø—Ä–æ—Å–æ–≤ —Å curl
- **[TESTING_GUIDE.md](TESTING_GUIDE.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- **[TESTING_README.md](TESTING_README.md)** - ‚ö†Ô∏è **–í–ê–ñ–ù–û: –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã**

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [üöÄ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—Å–±–æ—Ä–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [üîå API Endpoints](#-api-endpoints)
- [üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
- [üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#Ô∏è-–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
- [Swagger UI –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-swagger-ui-–∏-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)


## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         API Gateway (8080)              ‚îÇ
‚îÇ    Spring Cloud Gateway                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚ñº              ‚ñº               ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Eureka   ‚îÇ  ‚îÇ   Hotel     ‚îÇ  ‚îÇ   Booking    ‚îÇ
    ‚îÇ  (8761)   ‚îÇ  ‚îÇ  Service    ‚îÇ  ‚îÇ   Service    ‚îÇ
    ‚îÇ           ‚îÇ  ‚îÇ   (8081)    ‚îÇ  ‚îÇ    (8082)    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ               ‚îÇ                   ‚îÇ
         ‚îÇ          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ          ‚îÇ H2 DB   ‚îÇ         ‚îÇ H2 DB   ‚îÇ
         ‚îÇ          ‚îÇ hoteldb ‚îÇ         ‚îÇbookingdb‚îÇ
         ‚îÇ          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    Service Discovery
```

- **Eureka Server** (–ø–æ—Ä—Ç 8761) - Service Discovery
- **API Gateway** (–ø–æ—Ä—Ç 8080) - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –ø–µ—Ä–µ–¥–∞—á–∞ JWT
- **Hotel Service** (–ø–æ—Ä—Ç 8081) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è–º–∏ –∏ –Ω–æ–º–µ—Ä–∞–º–∏, H2 in-memory
- **Booking Service** (–ø–æ—Ä—Ç 8082) - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, JWT auth, H2 in-memory

## üöÄ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Java 17+
- Maven 3.6+
- Make (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make help

# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
make build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make start

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
make status

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make stop
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ Make –∫–æ–º–∞–Ω–¥—ã

```bash
make build          # –°–æ–±—Ä–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç
make clean          # –û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
make start          # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—Ä—Ç—ã)
make stop           # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make restart        # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make status         # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
make logs           # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make logs-eureka    # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ Eureka
make logs-hotel     # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ Hotel Service
make logs-booking   # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ Booking Service
make logs-gateway   # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ Gateway
make test           # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
make package        # –°–æ–∑–¥–∞—Ç—å jar —Ñ–∞–π–ª—ã
make run-jars       # –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑ jar —Ñ–∞–π–ª–æ–≤
make info           # –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ
make api-test       # –ë—ã—Å—Ç—Ä—ã–π API —Ç–µ—Å—Ç
```

### –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å
make dev SERVICE=hotel
make dev SERVICE=booking
make dev SERVICE=eureka
make dev SERVICE=gateway
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Eureka Server
cd spring-final-eureka
mvn spring-boot:run

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å Hotel Service
cd spring-final-hotel
mvn spring-boot:run

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Booking Service
cd spring-final-booking
mvn spring-boot:run

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å API Gateway
cd spring-final-gateway
mvn spring-boot:run
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

### ‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤!**

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫ —á–∞—Å—Ç—å —Ç–µ—Å—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç offline-—Ä–µ–∂–∏–º —Å –ø–æ–º–æ—â—å—é —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–æ–∫–æ–≤.
> - `ConcurrentBookingTest` (–º–æ–¥—É–ª—å `spring-final-booking`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TestHotelServiceConfig` –∏ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Hotel Service.
> - `HotelIntegrationTest` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ MockMvc —Å –ø—Ä–æ—Ñ–∏–ª–µ–º `test` (Security —Ñ–∏–ª—å—Ç—Ä—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞).

```bash
# 1. –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make start

# 2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∏—Ö –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (30-60 —Å–µ–∫—É–Ω–¥)
make status

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
make test
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
make test

# –ò–ª–∏ —á–µ—Ä–µ–∑ Maven
mvn test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è
cd spring-final-booking
mvn test

cd spring-final-hotel
mvn test
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

#### Booking Service
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (race conditions)
- ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ Saga Pattern –∏ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –æ—à–∏–±–æ–∫
- ‚úÖ –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä –∫–æ–º–Ω–∞—Ç —Å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

#### Hotel Service
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ—Ç–µ–ª—è–º–∏ –∏ –Ω–æ–º–µ—Ä–∞–º–∏
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏)
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–π
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. **[TESTING_GUIDE.md](TESTING_GUIDE.md)**



## –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Booking Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:

- **Admin**: username=`admin`, password=`admin123`
- **User**: username=`user`, password=`user123`

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

Hotel Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç:
- 2 –æ—Ç–µ–ª—è (Grand Hotel, Business Hotel)
- 10 –Ω–æ–º–µ—Ä–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤

## üîå API Endpoints

### –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ **API Gateway** –Ω–∞ –ø–æ—Ä—Ç—É **8080**.
–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤ —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer {token}`.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

| –ü—É—Ç—å | –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç –Ω–∞–ø—Ä—è–º—É—é |
|------|--------|---------------|
| `/api/user/**` | Booking Service | 8082 |
| `/api/bookings/**` | Booking Service | 8082 |
| `/api/hotels/**` | Hotel Service | 8081 |
| `/api/rooms/**` | Hotel Service | 8081 |

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (—á–µ—Ä–µ–∑ Gateway –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é Booking Service)

```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST http://localhost:8080/api/user/register
Content-Type: application/json

{
  "username": "newuser",
  "password": "password123"
}

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
POST http://localhost:8080/api/user/auth
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (ADMIN)

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ADMIN)
POST http://localhost:8080/api/user
Authorization: Bearer {admin_token}
Content-Type: application/json

{
  "username": "newuser",
  "password": "password123",
  "roles": ["ROLE_USER"]
}

# –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ADMIN)
PATCH http://localhost:8080/api/user/{id}
Authorization: Bearer {admin_token}
Content-Type: application/json

{
  "username": "updated_username",
  "enabled": true
}

# –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ADMIN)
DELETE http://localhost:8080/api/user/{id}
Authorization: Bearer {admin_token}
```

### –û—Ç–µ–ª–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω)

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–µ–ª–µ–π
GET http://localhost:8080/api/hotels
Authorization: Bearer {token}

# –°–æ–∑–¥–∞—Ç—å –æ—Ç–µ–ª—å (ADMIN)
POST http://localhost:8080/api/hotels
Authorization: Bearer {token}
Content-Type: application/json

{
  "name": "New Hotel",
  "address": "789 New Street, Moscow"
}
```

### –ù–æ–º–µ—Ä–∞

```bash
# –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –Ω–∞ –¥–∞—Ç—ã
GET http://localhost:8080/api/rooms?startDate=2026-02-01&endDate=2026-02-05
Authorization: Bearer {token}

# –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏)
GET http://localhost:8080/api/rooms/recommend?startDate=2026-02-01&endDate=2026-02-05&roomType=DOUBLE
Authorization: Bearer {token}

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –æ—Ç–µ–ª—é –∏ —Ç–∏–ø—É –Ω–æ–º–µ—Ä–∞
GET http://localhost:8080/api/rooms/recommend?hotelId=1&startDate=2026-02-01&endDate=2026-02-05&roomType=SINGLE
Authorization: Bearer {token}

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–º–µ—Ä (ADMIN)
POST http://localhost:8080/api/rooms
Authorization: Bearer {token}
Content-Type: application/json

{
  "hotelId": 1,
  "roomNumber": "303",
  "type": "SUITE",
  "pricePerNight": 15000,
  "available": true
}

# –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–º–µ—Ä (ADMIN)
PUT http://localhost:8080/api/rooms/{id}
Authorization: Bearer {token}
Content-Type: application/json

{
  "roomNumber": "303A",
  "type": "SUITE",
  "pricePerNight": 18000,
  "available": true
}

# –£–¥–∞–ª–∏—Ç—å –Ω–æ–º–µ—Ä (ADMIN)
DELETE http://localhost:8080/api/rooms/{id}
Authorization: Bearer {token}
```

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —ç–Ω–¥–ø–æ–π–Ω—Ç—ã Hotel Service (–Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Gateway)

```bash
# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Booking Service)
POST http://localhost:8081/api/rooms/{id}/confirm-availability
Content-Type: application/json

{
  "requestId": "unique-request-id",
  "bookingId": 123,
  "startDate": "2026-02-01",
  "endDate": "2026-02-05"
}

# –û—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—é (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è)
POST http://localhost:8081/api/rooms/{id}/release?requestId=unique-request-id
```

### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–æ–º –∫–æ–º–Ω–∞—Ç—ã
POST http://localhost:8080/api/bookings
Authorization: Bearer {token}
Content-Type: application/json

{
  "startDate": "2026-02-01",
  "endDate": "2026-02-05",
  "autoSelect": true,
  "roomType": "DOUBLE"
}

# –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤—ã–±–æ—Ä–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã
POST http://localhost:8080/api/bookings
Authorization: Bearer {token}
Content-Type: application/json

{
  "roomId": 1,
  "startDate": "2026-02-01",
  "endDate": "2026-02-05",
  "autoSelect": false
}

# –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
GET http://localhost:8080/api/bookings
Authorization: Bearer {token}

# –ü–æ–ª—É—á–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ ID
GET http://localhost:8080/api/bookings/{id}
Authorization: Bearer {token}

# –û—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
DELETE http://localhost:8080/api/bookings/{id}
Authorization: Bearer {token}
```

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤

#### Booking Service (—á–µ—Ä–µ–∑ Gateway –Ω–∞ –ø–æ—Ä—Ç—É 8080)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|------|----------|
| POST | `/api/user/register` | PUBLIC | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | `/api/user/auth` | PUBLIC | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JWT |
| POST | `/api/user` | ADMIN | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| PATCH | `/api/user/{id}` | ADMIN | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| DELETE | `/api/user/{id}` | ADMIN | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | `/api/bookings` | USER | –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| GET | `/api/bookings` | USER | –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | `/api/bookings/{id}` | USER | –ü–æ–ª—É—á–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ ID |
| DELETE | `/api/bookings/{id}` | USER | –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |

#### Hotel Service (—á–µ—Ä–µ–∑ Gateway –Ω–∞ –ø–æ—Ä—Ç—É 8080)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|------|----------|
| GET | `/api/hotels` | USER | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Ç–µ–ª–µ–π |
| POST | `/api/hotels` | ADMIN | –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–µ–ª—è |
| PUT | `/api/hotels/{id}` | ADMIN | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è |
| DELETE | `/api/hotels/{id}` | ADMIN | –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è |
| GET | `/api/rooms` | USER | –î–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –Ω–∞ –¥–∞—Ç—ã |
| GET | `/api/rooms/recommend` | USER | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏) |
| POST | `/api/rooms` | ADMIN | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ |
| PUT | `/api/rooms/{id}` | ADMIN | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ |
| DELETE | `/api/rooms/{id}` | ADMIN | –£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ |

#### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —ç–Ω–¥–ø–æ–π–Ω—Ç—ã (–Ω–µ —á–µ—Ä–µ–∑ Gateway)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| POST | `/api/rooms/{id}/confirm-availability` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (Saga) |
| POST | `/api/rooms/{id}/release` | –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è) |

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—é in-memory H2 –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

### Booking Service Database (`bookingdb`)

#### –¢–∞–±–ª–∏—Ü–∞ `users`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | BIGINT | Primary Key, Auto Increment |
| username | VARCHAR(255) | –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| password | VARCHAR(255) | –•—ç—à –ø–∞—Ä–æ–ª—è (BCrypt) |
| enabled | BOOLEAN | –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| created_at | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |

#### –¢–∞–±–ª–∏—Ü–∞ `user_roles`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| user_id | BIGINT | Foreign Key ‚Üí users.id |
| role | VARCHAR(50) | –†–æ–ª—å (ROLE_USER, ROLE_ADMIN) |

#### –¢–∞–±–ª–∏—Ü–∞ `bookings`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | BIGINT | Primary Key, Auto Increment |
| request_id | VARCHAR(255) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø—Ä–æ—Å–∞ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å) |
| user_id | BIGINT | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| hotel_id | BIGINT | ID –æ—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL –ø—Ä–∏ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–µ) |
| room_id | BIGINT | ID –Ω–æ–º–µ—Ä–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL) |
| start_date | DATE | –î–∞—Ç–∞ –∑–∞–µ–∑–¥–∞ |
| end_date | DATE | –î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ |
| status | VARCHAR(20) | PENDING, CONFIRMED, CANCELLED, COMPENSATED |
| created_at | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| expires_at | TIMESTAMP | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è (–¥–ª—è PENDING) |
| compensation_reason | VARCHAR(500) | –ü—Ä–∏—á–∏–Ω–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ |
| version | INTEGER | Optimistic locking |

**–ò–Ω–¥–µ–∫—Å—ã:**
- UNIQUE –Ω–∞ `request_id`
- INDEX –Ω–∞ `user_id`, `room_id`, `status`

### Hotel Service Database (`hoteldb`)

#### –¢–∞–±–ª–∏—Ü–∞ `hotels`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | BIGINT | Primary Key, Auto Increment |
| name | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–µ–ª—è |
| address | VARCHAR(500) | –ê–¥—Ä–µ—Å |
| created_at | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| updated_at | TIMESTAMP | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

#### –¢–∞–±–ª–∏—Ü–∞ `rooms`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | BIGINT | Primary Key, Auto Increment |
| hotel_id | BIGINT | Foreign Key ‚Üí hotels.id |
| room_number | VARCHAR(50) | –ù–æ–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã |
| type | VARCHAR(20) | SINGLE, DOUBLE, SUITE |
| price_per_night | DECIMAL(10,2) | –¶–µ–Ω–∞ –∑–∞ –Ω–æ—á—å |
| times_booked | INTEGER | –°—á–µ—Ç—á–∏–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (–¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏) |
| available | BOOLEAN | –î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –∫–æ–º–Ω–∞—Ç–∞ (–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å) |
| version | INTEGER | Optimistic locking |

**–ò–Ω–¥–µ–∫—Å—ã:**
- INDEX –Ω–∞ `hotel_id`, `room_number`, `times_booked`

#### –¢–∞–±–ª–∏—Ü–∞ `room_reservations`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | BIGINT | Primary Key, Auto Increment |
| room_id | BIGINT | Foreign Key ‚Üí rooms.id |
| booking_id | BIGINT | ID –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑ Booking Service |
| request_id | VARCHAR(255) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø—Ä–æ—Å–∞ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å) |
| start_date | DATE | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ |
| end_date | DATE | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ |
| expires_at | TIMESTAMP | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ |
| created_at | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- UNIQUE –Ω–∞ `request_id`
- INDEX –Ω–∞ `room_id`, `booking_id`, `expires_at`

### H2 Console

- **Hotel Service:** http://localhost:8081/h2-console
  - JDBC URL: `jdbc:h2:mem:hoteldb`
  - Username: `sa`
  - Password: (–ø—É—Å—Ç–æ)

- **Booking Service:** http://localhost:8082/h2-console
  - JDBC URL: `jdbc:h2:mem:bookingdb`
  - Username: `sa`
  - Password: (–ø—É—Å—Ç–æ)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT (JSON Web Tokens) –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã JWT
- **–ê–ª–≥–æ—Ä–∏—Ç–º:** HS384
- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:** 1 —á–∞—Å (3600000 ms)
- **Secret key:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è –≤ `application.yml` (`jwt.secret`)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–∫–µ–Ω–∞
```json
{
  "sub": "username",
  "roles": ["ROLE_USER", "ROLE_ADMIN"],
  "userId": 1,
  "iat": 1704638400,
  "exp": 1704642000
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST /api/user/register
{
  "username": "user",
  "password": "password123"
}
# –û—Ç–≤–µ—Ç: { "token": "eyJhbGc...", "username": "user" }

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST /api/user/auth
{
  "username": "admin",
  "password": "admin123"
}
# –û—Ç–≤–µ—Ç: { "token": "eyJhbGc...", "username": "admin" }
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```bash
curl -H "Authorization: Bearer eyJhbGciOiJIUzM4NCJ9..." \
  http://localhost:8080/api/bookings
```

### –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

#### ROLE_USER
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–µ–ª–µ–π –∏ –Ω–æ–º–µ—Ä–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- ‚úÖ –û—Ç–º–µ–Ω–∞ —Å–≤–æ–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è–º–∏/–Ω–æ–º–µ—Ä–∞–º–∏
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### ROLE_ADMIN
- ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∞ ROLE_USER
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–µ–ª–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

### –ó–∞—â–∏—Ç–∞ —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤

| –≠–Ω–¥–ø–æ–π–Ω—Ç | –î–æ—Å—Ç—É–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| POST `/api/user/register` | PUBLIC | –û—Ç–∫—Ä—ã—Ç–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| POST `/api/user/auth` | PUBLIC | –û—Ç–∫—Ä—ã—Ç–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| GET `/api/hotels` | USER, ADMIN | –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–µ–ª–µ–π |
| POST `/api/hotels` | ADMIN | –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–µ–ª—è |
| POST `/api/bookings` | USER, ADMIN | –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| POST `/api/user` | ADMIN | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| DELETE `/api/user/{id}` | ADMIN | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª–µ–π
- –ü–∞—Ä–æ–ª–∏ —Ö—ç—à–∏—Ä—É—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **BCrypt**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é)
- –ü–∞—Ä–æ–ª–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ API –æ—Ç–≤–µ—Ç–∞—Ö

### –ú–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

#### –ü–µ—Ä–µ–¥–∞—á–∞ JWT –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å JWT —á–µ—Ä–µ–∑ Gateway
2. Gateway –ø–µ—Ä–µ–¥–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω –≤ backend-—Å–µ—Ä–≤–∏—Å—ã
3. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç JWT —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `JwtAuthenticationFilter`
4. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ Hotel Service –∏–∑ Booking Service —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —ç–Ω–¥–ø–æ–π–Ω—Ç—ã
–≠–Ω–¥–ø–æ–π–Ω—Ç—ã `/api/rooms/{id}/confirm-availability` –∏ `/api/rooms/{id}/release` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏ —Ç–∞–∫–∂–µ –∑–∞—â–∏—â–µ–Ω—ã JWT.

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

- ‚úÖ **CSRF Protection:** –û—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è REST API (stateless)
- ‚úÖ **CORS:** –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Gateway –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ **SQL Injection:** –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ JPA/Hibernate
- ‚úÖ **XSS:** JSON –æ—Ç–≤–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è
- ‚úÖ **Brute Force:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å rate limiting
- ‚úÖ **Session Hijacking:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è stateless JWT —Ç–æ–∫–µ–Ω—ã

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `@ControllerAdvice` –≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ.

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ

–í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –µ–¥–∏–Ω–æ–º JSON —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "timestamp": "2026-01-07T20:15:30.123",
  "status": 401,
  "error": "Authentication failed",
  "message": "Invalid username or password"
}
```

#### –ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞:
- `timestamp` - –¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–∫–∏ (LocalDateTime)
- `status` - HTTP –∫–æ–¥ –æ—à–∏–±–∫–∏ (int)
- `error` - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏ (String)
- `message` - –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (String)

### HTTP –∫–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç | –ü—Ä–∏–º–µ—Ä |
|-----|----------|-----------------|--------|
| **400** | Bad Request | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ | –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã |
| **401** | Unauthorized | –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å |
| **403** | Forbidden | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ / –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω | USER –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –æ—Ç–µ–ª—å |
| **404** | Not Found | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω | –ó–∞–ø—Ä–æ—Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| **409** | Conflict | –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ | –î—É–±–ª–∏–∫–∞—Ç username, –¥–≤–æ–π–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **500** | Internal Server Error | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ |

### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏

#### 401 Unauthorized - –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å
```bash
POST /api/user/auth
{
  "username": "admin",
  "password": "wrongpassword"
}

# –û—Ç–≤–µ—Ç:
HTTP/1.1 401 Unauthorized
{
  "timestamp": "2026-01-07T20:15:30.123",
  "status": 401,
  "error": "Authentication failed",
  "message": "Invalid username or password"
}
```

#### 403 Forbidden - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω
```bash
POST /api/bookings
# (–±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization)

# –û—Ç–≤–µ—Ç:
HTTP/1.1 403 Forbidden
{
  "timestamp": "2026-01-07T20:16:15.456",
  "status": 403,
  "error": "Access denied",
  "message": "Access Denied"
}
```

#### 409 Conflict - –î—É–±–ª–∏–∫–∞—Ç username
```bash
POST /api/user/register
{
  "username": "admin",
  "password": "test123"
}

# –û—Ç–≤–µ—Ç:
HTTP/1.1 409 Conflict
{
  "timestamp": "2026-01-07T20:16:45.789",
  "status": 409,
  "error": "User already exists",
  "message": "Username already exists"
}
```

#### 404 Not Found - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
GET /api/bookings/999

# –û—Ç–≤–µ—Ç:
HTTP/1.1 404 Not Found
{
  "timestamp": "2026-01-07T20:17:20.321",
  "status": 404,
  "error": "Resource not found",
  "message": "Booking not found with id: 999"
}
```

#### 409 Conflict - –ù–æ–º–µ—Ä —É–∂–µ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω
```bash
POST /api/rooms/1/confirm-availability
{
  "requestId": "req-456",
  "bookingId": 2,
  "startDate": "2026-02-01",
  "endDate": "2026-02-05"
}

# –û—Ç–≤–µ—Ç:
HTTP/1.1 409 Conflict
{
  "timestamp": "2026-01-07T20:18:10.654",
  "status": 409,
  "error": "Room not available",
  "message": "Room is already booked for the requested dates"
}
```

#### 400 Bad Request - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```bash
POST /api/bookings
{
  "startDate": "2026-02-05",
  "endDate": "2026-02-01"  # endDate —Ä–∞–Ω—å—à–µ startDate
}

# –û—Ç–≤–µ—Ç:
HTTP/1.1 400 Bad Request
{
  "timestamp": "2026-01-07T20:19:00.987",
  "status": 400,
  "error": "Validation failed",
  "message": "End date must be after start date"
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ

#### Java (WebClient)
```java
webClient.post()
    .uri("/api/bookings")
    .header("Authorization", "Bearer " + token)
    .bodyValue(bookingDto)
    .retrieve()
    .onStatus(HttpStatus::is4xxClientError, response -> 
        response.bodyToMono(ErrorResponse.class)
            .flatMap(error -> Mono.error(
                new BookingException(error.getMessage())
            ))
    )
    .bodyToMono(BookingDto.class)
    .block();
```

#### curl
```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π
curl -v -X POST http://localhost:8080/api/user/auth \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"wrong"}' 2>&1 | tee error.log

# –í—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –∫–æ–¥ –æ—à–∏–±–∫–∏
curl -s -o /dev/null -w "%{http_code}" \
  http://localhost:8080/api/bookings

# –ü–æ–ª—É—á–∏—Ç—å JSON —Å –æ—à–∏–±–∫–æ–π
curl -s -X POST http://localhost:8080/api/user/auth \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"wrong"}' | jq '.'
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```
2026-01-07 20:15:30.123 ERROR [...] GlobalExceptionHandler - Runtime exception occurred: Invalid username or password
java.lang.RuntimeException: Invalid username or password
    at ru.mephi.springfinal.booking.service.UserService.authenticate(UserService.java:63)
    ...
```

–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- **ERROR** - RuntimeException, Exception (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏)
- **WARN** - –û–∂–∏–¥–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏ (–Ω–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å, –Ω–µ –Ω–∞–π–¥–µ–Ω —Ä–µ—Å—É—Ä—Å)
- **INFO** - –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **DEBUG** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –û—Ç–ª–∞–¥–∫–∞ –æ—à–∏–±–æ–∫

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ HTTP —Å—Ç–∞—Ç—É—Å:**
   ```bash
   curl -v http://localhost:8080/api/bookings
   ```

2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:**
   ```bash
   curl -s http://localhost:8080/api/bookings | jq '.'
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞:**
   ```bash
   make logs-booking
   make logs-hotel
   ```

4. **–í–∫–ª—é—á–∏—Ç–µ DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   –í `application.yml`:
   ```yaml
   logging:
     level:
       ru.mephi.springfinal: DEBUG
   ```

### Best Practices

‚úÖ **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ HTTP —Å—Ç–∞—Ç—É—Å** –ø–µ—Ä–µ–¥ –ø–∞—Ä—Å–∏–Ω–≥–æ–º –æ—Ç–≤–µ—Ç–∞
‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `error.message`**, –∞ –Ω–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
‚úÖ **–õ–æ–≥–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `timestamp`** –¥–ª—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ —Å –ª–æ–≥–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞
‚úÖ **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫** –ø–æ-—Ä–∞–∑–Ω–æ–º—É (401 ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω, 409 ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç)

## üåê Swagger UI –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- Hotel Service: http://localhost:8081/swagger-ui.html
- Booking Service: http://localhost:8082/swagger-ui.html
- API Gateway: http://localhost:8080/swagger-ui.html

## H2 Console

- Hotel Service: http://localhost:8081/h2-console (JDBC URL: `jdbc:h2:mem:hoteldb`)
- Booking Service: http://localhost:8082/h2-console (JDBC URL: `jdbc:h2:mem:bookingdb`)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (Saga Pattern)

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω Saga:

1. **PENDING** - –°–æ–∑–¥–∞–µ—Ç—Å—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç–∞—Ç—É—Å–µ PENDING
2. **Confirmation** - Booking Service –≤—ã–∑—ã–≤–∞–µ—Ç Hotel Service –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
3. **CONFIRMED** - –ü—Ä–∏ —É—Å–ø–µ—Ö–µ —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ CONFIRMED
4. **COMPENSATED** - –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è (–æ—Ç–º–µ–Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏)

### –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã –±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é `requestId`:
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å —Ç–µ–º –∂–µ `requestId` –≤–µ—Ä–Ω–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö —Å–±–æ—è—Ö

### Retry –∏ Timeout

- –í—ã–∑–æ–≤—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏–º–µ—é—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ timeout (5 —Å–µ–∫—É–Ω–¥)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ retry —Å exponential backoff (3 –ø–æ–ø—ã—Ç–∫–∏)
- –ü—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ø–æ–ø—ã—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è

### –ê–ª–≥–æ—Ä–∏—Ç–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏

Hotel Service –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∫–∞–∂–¥–æ–≥–æ –Ω–æ–º–µ—Ä–∞ (`timesBooked`).
–ü—Ä–∏ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–µ –Ω–æ–º–µ—Ä–∞ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Ç–µ, —á—Ç–æ –∏–º–µ—é—Ç –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π.

### Cleanup Scheduler

- Hotel Service: –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–π –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- Booking Service: –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö PENDING –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- Spring Boot 3.5.9
- Spring Cloud 2024.0.2
- Spring Data JPA
- Spring Security + JWT
- H2 Database (in-memory)
- Lombok
- MapStruct
- SpringDoc OpenAPI
- Netflix Eureka
- Spring Cloud Gateway
- WebFlux (–¥–ª—è WebClient –∏ Gateway)

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç correlation ID —á–µ—Ä–µ–∑ MDC:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ `X-Correlation-Id` –ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- –õ–æ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç correlation ID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
